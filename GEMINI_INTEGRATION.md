# Google Gemini API Integration

## –û–±–∑–æ—Ä

–ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Gemini API –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –æ—Ç–≤–µ—Ç–æ–≤ API —Ç–µ—Å—Ç–æ–≤ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤. –ó–∞–º–µ–Ω—è–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å Xiaomi Mimo.

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env.local)

```env
# Google Gemini Configuration
GEMINI_API_KEY=AIzaSyCG4ZqZozFNuIO1Kt1o7KhbunDFBH5KhWQ
GEMINI_API_URL=https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent
```

## API Endpoints

### 1. AI –ê–Ω–∞–ª–∏–∑ –æ—Ç–≤–µ—Ç–æ–≤
**Endpoint:** `POST /api/ai/analyze-response`

–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç—ã API —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–º–æ—â—å—é Google Gemini.

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "actualResponse": "...",
  "expectedResponse": "...",
  "testName": "Test Name",
  "apiUrl": "https://api.example.com",
  "httpMethod": "GET",
  "httpStatus": 200
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "analysis": "‚úÖ –ó–∞–ø—Ä–æ—Å –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ. –û—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è...",
  "fallback": false
}
```

### 2. AI –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –∞–Ω–∞–ª–∏–∑ —Ç–µ—Å—Ç–æ–≤
**Endpoint:** `POST /api/ai/analyze`

–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π endpoint –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö AI –æ–ø–µ—Ä–∞—Ü–∏–π.

**–î–µ–π—Å—Ç–≤–∏—è:**
- `analyzeService` - –∞–Ω–∞–ª–∏–∑ API —Å–µ—Ä–≤–∏—Å–∞
- `generateTests` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≥–æ—Ç–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤
- `generateExecutableTests` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏—Å–ø–æ–ª–Ω—è–µ–º—ã—Ö —Ç–µ—Å—Ç–æ–≤
- `generateScenarios` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- `extractExamples` - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–æ–≤ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- `validateTestResult` - –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç–µ—Å—Ç–æ–≤

**–ó–∞–ø—Ä–æ—Å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤:**
```json
{
  "action": "generateExecutableTests",
  "data": {
    "serviceName": "JSONPlaceholder"
  }
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "result": "[{\"id\":\"test-1\",\"name\":\"–ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π\",\"url\":\"https://jsonplaceholder.typicode.com/users\",\"method\":\"GET\",...}]"
}
```

### 3. –ü—Ä—è–º–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Gemini
**Endpoint:** `POST /api/test-gemini-direct`

–ü—Ä—è–º–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Google Gemini API.

## –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏

### GeminiAPI Class (`lib/gemini-api.ts`)

–û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Google Gemini API:

```typescript
const gemini = new GeminiAPI();

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏—Å–ø–æ–ª–Ω—è–µ–º—ã—Ö —Ç–µ—Å—Ç–æ–≤
const tests = await gemini.generateExecutableTests('GitHub API');

// –ê–Ω–∞–ª–∏–∑ API —Å–µ—Ä–≤–∏—Å–∞
const analysis = await gemini.analyzeAPI('OpenWeather API');

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
const scenarios = await gemini.generateTestScenarios(apiDocumentation);
```

### –ú–µ—Ç–æ–¥—ã GeminiAPI:

1. **`generateContent(prompt, options)`** - –±–∞–∑–æ–≤—ã–π –º–µ—Ç–æ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
2. **`analyzeAPI(serviceName)`** - –∞–Ω–∞–ª–∏–∑ API —Å–µ—Ä–≤–∏—Å–∞
3. **`generateReadyTests(serviceName)`** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≥–æ—Ç–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤
4. **`generateExecutableTests(serviceName)`** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏—Å–ø–æ–ª–Ω—è–µ–º—ã—Ö —Ç–µ—Å—Ç–æ–≤
5. **`generateTestScenarios(apiDoc)`** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
6. **`extractExamples(apiDoc)`** - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø—Ä–∏–º–µ—Ä–æ–≤
7. **`validateTestResult(test, result)`** - –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### HTML —Ç–µ—Å—Ç–µ—Ä—ã
1. **`test-gemini-api.html`** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–≥–æ API
2. **`test-gemini-generation.html`** - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ Gemini API

1. **–§–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `contents` —Å `parts` –≤–º–µ—Å—Ç–æ `messages`
2. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** API –∫–ª—é—á –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ URL –ø–∞—Ä–∞–º–µ—Ç—Ä–µ `?key=`
3. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `generationConfig` –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
4. **–û—Ç–≤–µ—Ç:** –°—Ç—Ä—É–∫—Ç—É—Ä–∞ `candidates[0].content.parts[0].text`

### –ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞ –∫ Gemini API

```javascript
const response = await fetch(`${geminiApiUrl}?key=${apiKey}`, {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    contents: [{
      parts: [{
        text: "–í–∞—à –ø—Ä–æ–º–ø—Ç –∑–¥–µ—Å—å"
      }]
    }],
    generationConfig: {
      temperature: 0.3,
      topP: 0.95,
      maxOutputTokens: 1000
    }
  })
});
```

## Fallback –º–µ—Ö–∞–Ω–∏–∑–º

–ï—Å–ª–∏ Gemini API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ –¥–µ–º–æ-–æ—Ç–≤–µ—Ç—ã:

### –î–ª—è –∞–Ω–∞–ª–∏–∑–∞ –æ—Ç–≤–µ—Ç–æ–≤:
- ‚úÖ –ê–Ω–∞–ª–∏–∑ HTTP —Å—Ç–∞—Ç—É—Å–æ–≤
- üìä –ü–æ–¥—Å—á–µ—Ç –ø–æ–ª–µ–π –≤ –æ—Ç–≤–µ—Ç–µ
- üîç –ë–∞–∑–æ–≤–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –æ–∂–∏–¥–∞–µ–º—ã–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º
- ‚ö†Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ –æ—Ç–≤–µ—Ç–µ

### –î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤:
- üìã –î–µ–º–æ-—Ç–µ—Å—Ç—ã –¥–ª—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö API (JSONPlaceholder, GitHub)
- üîß –ë–∞–∑–æ–≤—ã–µ HTTP –º–µ—Ç–æ–¥—ã (GET, POST, PUT, DELETE)
- üéØ –†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç–æ–≤

## –ú–∏–≥—Ä–∞—Ü–∏—è —Å Xiaomi Mimo

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ:
1. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ `GeminiAPI`
3. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω endpoint `/api/ai/analyze`
4. ‚úÖ –ò–∑–º–µ–Ω–µ–Ω —Ñ–æ—Ä–º–∞—Ç API –∑–∞–ø—Ä–æ—Å–æ–≤
5. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤
6. ‚úÖ –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π endpoint
7. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã HTML —Ç–µ—Å—Ç–µ—Ä—ã

### –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å AI –∞–Ω–∞–ª–∏–∑–∞ –æ—Å—Ç–∞–ª—Å—è –ø—Ä–µ–∂–Ω–∏–º
- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤ –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è
- Fallback –º–µ—Ö–∞–Ω–∏–∑–º —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫ –∂–µ
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è

## –§—É–Ω–∫—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤

### 1. –ê–Ω–∞–ª–∏–∑ API —Å–µ—Ä–≤–∏—Å–∞
–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç API –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ:
- –û—Å–Ω–æ–≤–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞—Ö
- –ú–µ—Ç–æ–¥–∞—Ö –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –§–æ—Ä–º–∞—Ç–∞—Ö –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–∏–º–µ—Ä–∞—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≥–æ—Ç–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤
–°–æ–∑–¥–∞–µ—Ç 3-5 —Ç–µ—Å—Ç–æ–≤ —Å:
- –ù–∞–∑–≤–∞–Ω–∏–µ–º –∏ –æ–ø–∏—Å–∞–Ω–∏–µ–º
- HTTP –º–µ—Ç–æ–¥–∞–º–∏
- –†–µ–∞–ª—å–Ω—ã–º–∏ URL
- –ë–∞–∑–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π

### 3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏—Å–ø–æ–ª–Ω—è–µ–º—ã—Ö —Ç–µ—Å—Ç–æ–≤
–°–æ–∑–¥–∞–µ—Ç –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å:
- –£–Ω–∏–∫–∞–ª—å–Ω—ã–º–∏ ID
- –ü–æ–ª–Ω—ã–º–∏ URL —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- –ó–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ –∏ —Ç–µ–ª–æ–º –∑–∞–ø—Ä–æ—Å–∞
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –û–∂–∏–¥–∞–µ–º—ã–º–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏

### 4. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
–°–æ–∑–¥–∞–µ—Ç –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:
- –ü–æ–∑–∏—Ç–∏–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã
- –ù–µ–≥–∞—Ç–∏–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã
- –¢–µ—Å—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –¢–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Gemini

- üöÄ –ë–æ–ª–µ–µ –±—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã
- üéØ –õ—É—á—à–µ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- üîí –ù–∞–¥–µ–∂–Ω–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ Google
- üí∞ –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–µ —Ü–µ–Ω—ã
- üåç –û—Ç–ª–∏—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞
- üß† –£–ª—É—á—à–µ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤
- üìä –ë–æ–ª–µ–µ —Ç–æ—á–Ω—ã–π –∞–Ω–∞–ª–∏–∑ API