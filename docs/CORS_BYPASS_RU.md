# üîì –û–±—Ö–æ–¥ CORS –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ - –ö—Ä–∞—Ç–∫–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## –ß—Ç–æ —ç—Ç–æ?

CORS (Cross-Origin Resource Sharing) - —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –±—Ä–∞—É–∑–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ –≤–Ω–µ—à–Ω–∏–º API. –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –æ–±–æ–π—Ç–∏ —ç—Ç—É –±–ª–æ–∫–∏—Ä–æ–≤–∫—É –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π Next.js –ø—Ä–æ–∫—Å–∏!

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –®–∞–≥ 1: –í–∫–ª—é—á–∏—Ç–µ –æ–±—Ö–æ–¥ CORS
–í –ª—é–±–æ–π —Ñ–æ—Ä–º–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API –Ω–∞–π–¥–∏—Ç–µ –∏ –≤–∫–ª—é—á–∏—Ç–µ –≥–∞–ª–æ—á–∫—É:
```
‚òëÔ∏è –û–±—Ö–æ–¥ CORS –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
```

### –®–∞–≥ 2: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π –ø—Ä–æ–∫—Å–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **–ª–æ–∫–∞–ª—å–Ω—ã–π Next.js –ø—Ä–æ–∫—Å–∏** - —ç—Ç–æ —Å–∞–º—ã–π –Ω–∞–¥—ë–∂–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç!

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ, –Ω–∞–∂–º–∏—Ç–µ **"‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CORS –ø—Ä–æ–∫—Å–∏"** –∏ –≤—ã–±–µ—Ä–∏—Ç–µ:
- **–õ–æ–∫–∞–ª—å–Ω—ã–π –ø—Ä–æ–∫—Å–∏** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è) - —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ –≤–∞—à Next.js —Å–µ—Ä–≤–µ—Ä
- **corsproxy.io** - –≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å (–º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å)
- **allorigins.win** - –≤–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–∏—Å (–º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å)

### –®–∞–≥ 3: –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ!
–ü—Ä–æ—Å—Ç–æ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –∑–∞–ø—Ä–æ—Å –∫–∞–∫ –æ–±—ã—á–Ω–æ. –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–π–¥—É—Ç —á–µ—Ä–µ–∑ –ø—Ä–æ–∫—Å–∏.

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–∫—Å–∏

‚úÖ **–ù–∞–¥—ë–∂–Ω–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç –≤—Å–µ–≥–¥–∞, –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π  
‚úÖ **–°–∫–æ—Ä–æ—Å—Ç—å** - –±—ã—Å—Ç—Ä–µ–µ –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤  
‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –¥–∞–Ω–Ω—ã–µ –Ω–µ —É—Ö–æ–¥—è—Ç –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä—ã  
‚úÖ **–ë–µ–∑ –ª–∏–º–∏—Ç–æ–≤** - –Ω–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤  

## –ì–¥–µ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?

‚úÖ –û—Å–Ω–æ–≤–Ω–∞—è —Ñ–æ—Ä–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (ApiTestForm)  
‚úÖ –õ–æ–∫–∞–ª—å–Ω–∞—è —Ñ–æ—Ä–º–∞ (ApiTestFormLocal)  
‚úÖ –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ—Å—Ç–µ—Ä —Å AI (UnifiedApiTester)  

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ GitHub API
```
URL: https://api.github.com/users/github
–ú–µ—Ç–æ–¥: GET
‚òëÔ∏è –û–±—Ö–æ–¥ CORS: –í–∫–ª—é—á–µ–Ω (–ª–æ–∫–∞–ª—å–Ω—ã–π –ø—Ä–æ–∫—Å–∏)
```

### –ü—Ä–∏–º–µ—Ä 2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ç–æ–∫–µ–Ω–æ–º
```
URL: https://api.example.com/data
–ú–µ—Ç–æ–¥: GET
–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è: Bearer Token
‚òëÔ∏è –û–±—Ö–æ–¥ CORS: –í–∫–ª—é—á–µ–Ω (–ª–æ–∫–∞–ª—å–Ω—ã–π –ø—Ä–æ–∫—Å–∏)
```

### –ü—Ä–∏–º–µ—Ä 3: POST –∑–∞–ø—Ä–æ—Å
```
URL: https://jsonplaceholder.typicode.com/posts
–ú–µ—Ç–æ–¥: POST
–¢–µ–ª–æ: {"title": "test", "body": "test", "userId": 1}
‚òëÔ∏è –û–±—Ö–æ–¥ CORS: –í–∫–ª—é—á–µ–Ω (–ª–æ–∫–∞–ª—å–Ω—ã–π –ø—Ä–æ–∫—Å–∏)
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `test-cors-bypass.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞.

## –í–∞–∂–Ω–æ! ‚ö†Ô∏è

- **–õ–æ–∫–∞–ª—å–Ω—ã–π –ø—Ä–æ–∫—Å–∏** - –±–µ–∑–æ–ø–∞—Å–µ–Ω –¥–ª—è –ª—é–±—ã—Ö –¥–∞–Ω–Ω—ã—Ö, —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ –≤–∞—à–µ–º —Å–µ—Ä–≤–µ—Ä–µ
- **–í–Ω–µ—à–Ω–∏–µ –ø—Ä–æ–∫—Å–∏** - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–ª—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–¢–æ–ª—å–∫–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏** - –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ CORS –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ API

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π –ø—Ä–æ–∫—Å–∏?
```
–í–∞—à –±—Ä–∞—É–∑–µ—Ä ‚Üí Next.js API (/api/proxy) ‚Üí –¶–µ–ª–µ–≤–æ–π API ‚Üí Next.js ‚Üí –ë—Ä–∞—É–∑–µ—Ä
```

–ó–∞–ø—Ä–æ—Å –ø—Ä–æ—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ –≤–∞—à —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π Next.js —Å–µ—Ä–≤–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π:
1. –ü–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –æ—Ç –±—Ä–∞—É–∑–µ—Ä–∞
2. –î–µ–ª–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ —Ü–µ–ª–µ–≤–æ–º—É API –æ—Ç –∏–º–µ–Ω–∏ —Å–µ—Ä–≤–µ—Ä–∞ (–±–µ–∑ CORS –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π)
3. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ CORS –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏

### API Endpoint
```typescript
GET/POST/PUT/DELETE/PATCH /api/proxy?url=<target_url>
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
–í–∞—à–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
- `corsProxyEnabled` - –≤–∫–ª—é—á–µ–Ω –ª–∏ –æ–±—Ö–æ–¥ CORS
- `corsProxyUrl` - –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø—Ä–æ–∫—Å–∏ ('local' –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –õ–æ–∫–∞–ª—å–Ω—ã–π –ø—Ä–æ–∫—Å–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
**–†–µ—à–µ–Ω–∏–µ**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Next.js —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω (npm run dev)

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∞ 500 –æ—Ç –ø—Ä–æ–∫—Å–∏
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞ Next.js –¥–ª—è –¥–µ—Ç–∞–ª–µ–π –æ—à–∏–±–∫–∏

### –ü—Ä–æ–±–ª–µ–º–∞: –¶–µ–ª–µ–≤–æ–π API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É
**–†–µ—à–µ–Ω–∏–µ**: –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ - –ø—Ä–æ–∫—Å–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ API –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞.

## –ö–æ–¥

–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `app/api/proxy/route.ts` - Next.js API endpoint –¥–ª—è –ø—Ä–æ–∫—Å–∏
- `lib/cors-proxy.ts` - —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–∫—Å–∏
- `components/CorsProxySettings.tsx` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–∫—Å–∏
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ —Ñ–æ—Ä–º—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## –í–æ–ø—Ä–æ—Å—ã?

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ Next.js —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞ Next.js
4. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ü–µ–ª–µ–≤–æ–π API –¥–æ—Å—Ç—É–ø–µ–Ω

---

**–ü—Ä–∏—è—Ç–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è! üöÄ**
